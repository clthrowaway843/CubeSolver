import{o as h,e as A,T as $}from"./ollHandler-D_qtY1dw.js";const j=localStorage.getItem("customAlgorithms");let r=j?JSON.parse(j):Object.fromEntries(Object.entries(h).map(([e,t])=>[Number(e),{alg:t,rotation:""}]));const B=localStorage.getItem("customNotes");let I=B?JSON.parse(B):Object.fromEntries(Object.entries(A).map(([e,t])=>[Number(e),t]));const H=new $({experimentalSetupAnchor:"end",puzzle:"3x3x3"}),R=new $({experimentalSetupAnchor:"end",puzzle:"3x3x3"}),U=document.getElementById("previous-twisty");U&&U.appendChild(R);const J=document.getElementById("oll-twisty-container");J&&J.appendChild(H);const S=document.getElementById("choices"),p=document.getElementById("feedback"),N=document.getElementById("previous-twisty-container"),x=document.getElementById("algorithm-list"),y=document.getElementById("algorithm-checkboxes"),L=document.getElementById("toggle-selection"),O=document.getElementById("select-all"),T=document.getElementById("deselect-all"),z={},P=localStorage.getItem("selectedAlgorithms");let a=P?JSON.parse(P):Object.keys(h).map(Number);function M(){y&&(y.innerHTML="",Object.entries(h).forEach(([e,t])=>{var v,b;const i=`OLL ${e}`,g=document.createElement("div");g.className="checkbox-container";const m=document.createElement("input");m.type="checkbox",m.checked=a.includes(Number(e)),m.addEventListener("change",o=>{const u=Number(e);m.checked?a.push(u):a=a.filter(k=>k!==u),localStorage.setItem("selectedAlgorithms",JSON.stringify(a)),o.stopPropagation()}),m.addEventListener("click",o=>o.stopPropagation());const E=document.createElement("label");E.className="oll-label",E.textContent=i;const w=document.createElement("span");w.className="arrow-icon",w.textContent=" âž¢";const f=document.createElement("div");f.className="twisty-inline";const C=new $({experimentalSetupAnchor:"end",puzzle:"3x3x3",background:"none",controlPanel:"none",hintFacelets:"none",cameraDistance:4.5}),d=((v=r[Number(e)])==null?void 0:v.rotation)||"";C.alg=d?`${d} ${t}`:t,z[Number(e)]=C,f.appendChild(C);const l=document.createElement("input");l.type="text",l.value=((b=r[Number(e)])==null?void 0:b.alg)||t,l.className="custom-alg-input",l.title="Edit algorithm for this case",l.addEventListener("change",()=>{r[Number(e)]={...r[Number(e)],alg:l.value},localStorage.setItem("customAlgorithms",JSON.stringify(r))});const n=document.createElement("select");["","U","U2","U'"].forEach(o=>{var k;const u=document.createElement("option");u.value=o,u.textContent=o===""?"Default":o,((k=r[Number(e)])==null?void 0:k.rotation)===o&&(u.selected=!0),n.appendChild(u)}),n.className="rotation-select",n.title="Set default U rotation for this case",n.addEventListener("change",()=>{let o=n.value;o==="U"?o="U'":o==="U'"&&(o="U"),r[Number(e)]={...r[Number(e)],rotation:o},localStorage.setItem("customAlgorithms",JSON.stringify(r));const u=z[Number(e)];u&&(u.alg=o?`${o} ${t}`:t)});const s=document.createElement("textarea");s.className="custom-note-input",s.placeholder="Add a note or reminder...",s.value=I[Number(e)]??A[Number(e)]??"",s.title="Edit note for this case",s.rows=2,s.addEventListener("change",()=>{I[Number(e)]=s.value,localStorage.setItem("customNotes",JSON.stringify(I))});const c=document.createElement("div");c.className="controls-wrapper",c.appendChild(E),c.appendChild(l),c.appendChild(s),c.appendChild(n),g.appendChild(m),g.appendChild(c),g.appendChild(f),y.appendChild(g)}))}L==null||L.addEventListener("click",()=>{x&&(x.style.display=x.style.display==="none"?"block":"none")});O==null||O.addEventListener("click",()=>{a=Object.keys(h).map(Number),M()});T==null||T.addEventListener("click",()=>{a=[];const e=y==null?void 0:y.querySelectorAll('input[type="checkbox"]');e==null||e.forEach(t=>{t.checked=!1}),localStorage.removeItem("selectedAlgorithms")});M();N&&(N.style.display="none");function q(e){for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}}W();function W(){if(!p||!S)return;if(a.length===0){p.textContent="No algorithms selected. Please select at least one.",p.className="feedback incorrect";return}const e=a[Math.floor(Math.random()*a.length)],t=r[e]||{alg:h[e],rotation:""},i=t.rotation?`${t.rotation} ${t.alg}`:t.alg,g=I[e]??A[e],m=[],E=Math.min(3,a.length-1),w=100;for(let d=0,l=0;l<E&&d<w;d++){const n=a[Math.floor(Math.random()*a.length)],s=m.some(c=>c.index===n);n!==e&&!s&&(m.push({index:n,algorithm:h[n]}),l++)}const f=[{index:e,algorithm:i},...m];q(f),H.alg=i;const C=["A","B","C","D"];S.innerHTML="",f.forEach((d,l)=>{const n=document.createElement("div");n.className="option-container";const s=document.createElement("span");s.className="option-label",s.textContent=`${C[l]}:`;const c=document.createElement("button");c.className="option-button",c.textContent=d.algorithm,c.addEventListener("click",()=>F(d.algorithm,i,g));const v=I[d.index]??A[d.index];if(v){const b=document.createElement("span");b.className="reminder-text",b.textContent=`(${v})`,n.appendChild(s),n.appendChild(c),n.appendChild(b)}else n.appendChild(s),n.appendChild(c);S.appendChild(n)})}function F(e,t,i){p&&(e===t?(p.textContent="Correct!",p.className="feedback correct",N&&(N.style.display="none"),setTimeout(()=>{p.textContent=""},1e3)):(i?p.innerHTML=`Incorrect.The correct answer was: <br><strong>${t} <br>(${i})</strong>`:p.innerHTML=`Incorrect.The correct answer was: <br><strong>${t}</strong>`,p.className="feedback incorrect",R.alg=t,N&&(N.style.display="block")),W())}const D=document.getElementById("reset-algs");D&&D.addEventListener("click",()=>{r=Object.fromEntries(Object.entries(h).map(([e,t])=>[Number(e),{alg:t,rotation:""}])),localStorage.setItem("customAlgorithms",JSON.stringify(r)),M()});
