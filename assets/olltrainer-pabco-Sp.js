import{o as C,d as x,T as B,e as Q}from"./ollHandler-D08f7aeD.js";const J={"Dot Cases":[1,2,3,4,17,18,19,20],Block:[5,6],Cross:[21,22,23,24,25,26,27],Fish:[9,10,35,37],"Big L":[13,14,15,16],"Small L":[47,48,49,50,53,54],Lightning:[7,8,11,12,39,40],"Lightning + 1":[29,30,41,42],Line:[51,52,55,56],P:[31,32,43,44],C:[34,46],W:[36,38],T:[33,45],"All corners":[28,57]},z=localStorage.getItem("customAlgorithms");let g=z?JSON.parse(z):Object.fromEntries(Object.entries(C).map(([e,t])=>[Number(e),{alg:t,rotation:""}]));const H=localStorage.getItem("customNotes");let I=H?JSON.parse(H):Object.fromEntries(Object.entries(x).map(([e,t])=>[Number(e),t]));const W=new B({experimentalSetupAnchor:"end",puzzle:"3x3x3"}),F=new B({experimentalSetupAnchor:"end",puzzle:"3x3x3"}),P=document.getElementById("previous-twisty");P&&P.appendChild(F);const D=document.getElementById("oll-twisty-container");D&&D.appendChild(W);const A=document.getElementById("choices"),E=document.getElementById("feedback"),N=document.getElementById("previous-twisty-container"),L=document.getElementById("algorithm-checkboxes"),O=document.getElementById("select-all"),T=document.getElementById("deselect-all"),U={},G=localStorage.getItem("selectedAlgorithms");let a=G?JSON.parse(G):Object.keys(C).map(Number);const k=document.getElementById("column-count");let V=Number(k==null?void 0:k.value)||5;k&&k.addEventListener("change",()=>{V=Math.max(1,Math.min(6,Number(k.value))),S()});function S(){if(!L)return;L.innerHTML="";const e=new Set;Object.entries(J).forEach(([l,o])=>{const s=document.createElement("div");s.className="oll-group-container",s.id=`group-${l.replace(/\s+/g,"-").toLowerCase()}`;const i=document.createElement("div");i.className="oll-group-header";const u=document.createElement("input");u.type="checkbox",u.checked=o.every(c=>a.includes(c)),u.className="oll-group-checkbox",u.addEventListener("change",()=>{o.forEach(c=>{const r=u.checked,n=a.indexOf(c);r&&n===-1&&a.push(c),!r&&n!==-1&&a.splice(n,1);const d=document.getElementById(`alg-checkbox-${c}`);d&&(d.checked=r)}),localStorage.setItem("selectedAlgorithms",JSON.stringify(a))});const h=document.createElement("span");h.className="oll-group-label",h.textContent=l,i.appendChild(u),i.appendChild(h),s.appendChild(i);const p=document.createElement("div");p.className="oll-group-grid",p.style.display="grid",p.style.gridTemplateColumns=`repeat(${V}, 1fr)`,p.style.gap="24px",o.forEach(c=>{p.appendChild(X(c)),e.add(c)}),s.appendChild(p),L.appendChild(s),i.style.cursor="pointer",i.addEventListener("click",c=>{if(c.target.classList.contains("oll-group-checkbox"))return;s.classList.toggle("collapsed");const r=s.querySelector(".oll-group-grid");s.classList.contains("collapsed")?r.style.display="none":r.style.display="grid"})});const t=document.getElementById("group-navigator");t&&(t.innerHTML="",Object.keys(J).forEach(l=>{const o=document.createElement("a");o.href=`#group-${l.replace(/\s+/g,"-").toLowerCase()}`,o.textContent=l,o.className="group-nav-link",t.appendChild(o)}))}function X(e){var v,$,j;const t=C[e],l=((v=Q)==null?void 0:v[t])||"",o=document.createElement("div");o.className="alg-box";const s=document.createElement("label");s.className="alg-header";const i=document.createElement("input");i.type="checkbox",i.id=`alg-checkbox-${e}`,i.checked=a.includes(e),i.className="alg-checkbox",i.addEventListener("change",()=>{i.checked?a.includes(e)||a.push(e):a=a.filter(f=>f!==e),localStorage.setItem("selectedAlgorithms",JSON.stringify(a))});const u=document.createElement("span");u.className="alg-label",u.textContent=`OLL ${e}`,s.appendChild(i),s.appendChild(u);const h=document.createElement("div");h.className="twisty-inline";const p=new B({experimentalSetupAnchor:"end",puzzle:"3x3x3",background:"none",controlPanel:"none",hintFacelets:"none",cameraDistance:4.7,experimentalDragInput:"none"}),c=(($=g[e])==null?void 0:$.rotation)||"";p.alg=c?`${c} ${t}`:t,U[e]=p,h.appendChild(p);let r=null;l&&(r=document.createElement("div"),r.className="alg-nickname",r.textContent=l);const n=document.createElement("textarea");n.className="custom-alg-input",n.value=((j=g[e])==null?void 0:j.alg)||t,n.title="Edit algorithm for this case",n.placeholder="Algorithm",n.rows=2,n.style.resize="vertical",n.addEventListener("change",()=>{g[e]={...g[e],alg:n.value},localStorage.setItem("customAlgorithms",JSON.stringify(g))});const d=document.createElement("select");["","U","U2","U'"].forEach(f=>{var M;const b=document.createElement("option");b.value=f,b.textContent=f===""?"Default":f,((M=g[e])==null?void 0:M.rotation)===f&&(b.selected=!0),d.appendChild(b)}),d.className="rotation-select",d.title="Set default U rotation for this case",d.addEventListener("change",()=>{let f=d.value;g[e]={...g[e],rotation:f},localStorage.setItem("customAlgorithms",JSON.stringify(g));const b=U[e];b&&(b.alg=f?`${f} ${t}`:t)});const m=document.createElement("textarea");m.className="custom-note-input",m.placeholder="Add a note or reminder...",m.value=I[e]??x[e]??"",m.title="Edit note for this case",m.rows=2,m.addEventListener("change",()=>{I[e]=m.value,localStorage.setItem("customNotes",JSON.stringify(I))}),o.appendChild(s),o.appendChild(h),r&&o.appendChild(r);const y=document.createElement("div");return y.className="alg-inputs",y.appendChild(n),y.appendChild(d),y.appendChild(m),o.appendChild(y),o}O==null||O.addEventListener("click",()=>{a=Object.keys(C).map(Number),S()});T==null||T.addEventListener("click",()=>{a=[];const e=L==null?void 0:L.querySelectorAll('input[type="checkbox"]');e==null||e.forEach(t=>{t.checked=!1}),localStorage.removeItem("selectedAlgorithms")});S();N&&(N.style.display="none");function Y(e){for(let t=e.length-1;t>0;t--){const l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}}_();function _(){if(!E||!A)return;if(a.length===0){E.textContent="No algorithms selected. Please select at least one.",E.className="feedback incorrect";return}const e=a[Math.floor(Math.random()*a.length)],t=g[e]||{alg:C[e],rotation:""},l=t.rotation?`${t.rotation} ${t.alg}`:t.alg,o=I[e]??x[e],s=[],i=Math.min(3,a.length-1),u=100;for(let c=0,r=0;r<i&&c<u;c++){const n=a[Math.floor(Math.random()*a.length)],d=s.some(m=>m.index===n);n!==e&&!d&&(s.push({index:n,algorithm:C[n]}),r++)}const h=[{index:e,algorithm:l},...s];Y(h),W.alg=l;const p=["A","B","C","D"];A.innerHTML="",h.forEach((c,r)=>{const n=document.createElement("div");n.className="option-container";const d=document.createElement("span");d.className="option-label",d.textContent=`${p[r]}:`;const m=document.createElement("button");m.className="option-button",m.textContent=c.algorithm,m.addEventListener("click",()=>Z(c.algorithm,l,o));const y=I[c.index]??x[c.index];if(y){const v=document.createElement("span");v.className="reminder-text",v.textContent=`(${y})`,n.appendChild(d),n.appendChild(m),n.appendChild(v)}else n.appendChild(d),n.appendChild(m);A.appendChild(n)})}function Z(e,t,l){E&&(e===t?(E.textContent="Correct!",E.className="feedback correct",N&&(N.style.display="none"),setTimeout(()=>{E.textContent=""},1e3)):(l?E.innerHTML=`Incorrect.The correct answer was: <br><strong>${t} <br>(${l})</strong>`:E.innerHTML=`Incorrect.The correct answer was: <br><strong>${t}</strong>`,E.className="feedback incorrect",F.alg=t,N&&(N.style.display="block")),_())}const R=document.getElementById("reset-algs");R&&R.addEventListener("click",()=>{g=Object.fromEntries(Object.entries(C).map(([e,t])=>[Number(e),{alg:t,rotation:""}])),localStorage.setItem("customAlgorithms",JSON.stringify(g)),S()});function K(){const e=document.getElementById("group-navigator");if(e){const t=e.offsetHeight+5;document.documentElement.style.scrollPaddingTop=t+"px"}}window.addEventListener("DOMContentLoaded",K);window.addEventListener("resize",K);const w=document.getElementById("jump-oll-input"),q=document.getElementById("jump-oll-btn");q&&w&&q.addEventListener("click",()=>{var l;const e=Number(w.value);if(!e||!C[e]){w.classList.add("input-error"),setTimeout(()=>w.classList.remove("input-error"),1e3);return}const t=(l=document.getElementById(`alg-checkbox-${e}`))==null?void 0:l.closest(".alg-box");if(t){const o=t.closest(".oll-group-container");if(o&&o.classList.contains("collapsed")){o.classList.remove("collapsed");const s=o.querySelector(".oll-group-grid");s&&(s.style.display="grid")}t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("highlight-oll"),setTimeout(()=>t.classList.remove("highlight-oll"),1200)}});
